/*
 * jQuery UI Timepicker
 *
 * Copyright 2010-2013, Francois Gelinas
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://fgelinas.com/code/timepicker
 *
 */

(function(c){function v(){this.debug=!0;this._curInst=null;this._disabledInputs=[];this._inDialog=this._timepickerShowing=!1;this._dialogClass="ui-timepicker-dialog";this._mainDivId="ui-timepicker-div";this._inlineClass="ui-timepicker-inline";this._currentClass="ui-timepicker-current";this._dayOverClass="ui-timepicker-days-cell-over";this.regional=[];this.regional[""]={hourText:"Hour",minuteText:"Minute",amPmText:["AM","PM"],closeButtonText:"Done",nowButtonText:"Now",deselectButtonText:"Deselect"};this._defaults={showOn:"focus",button:null,showAnim:"fadeIn",showOptions:{},appendText:"",beforeShow:null,onSelect:null,onClose:null,timeSeparator:":",periodSeparator:" ",showPeriod:!1,showPeriodLabels:!0,showLeadingZero:!0,showMinutesLeadingZero:!0,altField:"",defaultTime:"now",myPosition:"left top",atPosition:"left bottom",onHourShow:null,onMinuteShow:null,hours:{starts:0,ends:23},minutes:{starts:0,ends:55,interval:5},rows:4,showHours:!0,showMinutes:!0,optionalMinutes:!1,showCloseButton:!1,showNowButton:!1,showDeselectButton:!1};c.extend(this._defaults,this.regional[""]);this.tpDiv=c('<div id="'+this._mainDivId+'" class="ui-timepicker ui-widget ui-helper-clearfix ui-corner-all " style="display: none"></div>')}function t(a,b){c.extend(a,b);for(var d in b)if(null==b[d]||void 0==b[d])a[d]=b[d];return a}c.extend(c.ui,{timepicker:{version:"0.3.2"}});var w=(new Date).getTime();c.extend(v.prototype,{markerClassName:"hasTimepicker",log:function(){this.debug&&console.log.apply("",arguments)},_widgetTimepicker:function(){return this.tpDiv},setDefaults:function(a){t(this._defaults,a||{});return this},_attachTimepicker:function(a,b){var d=null,e;for(e in this._defaults){var f=a.getAttribute("time:"+e);if(f){d=d||{};try{d[e]=eval(f)}catch(g){d[e]=f}}}e=a.nodeName.toLowerCase();f="div"==e||"span"==e;a.id||(this.uuid+=1,a.id="tp"+this.uuid);var k=this._newInst(c(a),f);k.settings=c.extend({},b||{},d||{});"input"==e?(this._connectTimepicker(a,k),this._setTimeFromField(k)):f&&this._inlineTimepicker(a,k)},_newInst:function(a,b){return{id:a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:a,inline:b,tpDiv:!b?this.tpDiv:c('<div class="'+this._inlineClass+' ui-timepicker ui-widget  ui-helper-clearfix"></div>')}},_connectTimepicker:function(a,b){var d=c(a);b.append=c([]);b.trigger=c([]);d.hasClass(this.markerClassName)||(this._attachments(d,b),d.addClass(this.markerClassName).keydown(this._doKeyDown).keyup(this._doKeyUp).bind("setData.timepicker",function(a,c,d){b.settings[c]=d}).bind("getData.timepicker",function(a,c){return this._get(b,c)}),c.data(a,"timepicker",b))},_doKeyDown:function(a){var b=c.timepicker._getInst(a.target),d=!0;b._keyEvent=!0;if(c.timepicker._timepickerShowing)switch(a.keyCode){case 9:c.timepicker._hideTimepicker();d=!1;break;case 13:return c.timepicker._updateSelectedValue(b),c.timepicker._hideTimepicker(),!1;case 27:c.timepicker._hideTimepicker();break;default:d=!1}else 36==a.keyCode&&a.ctrlKey?c.timepicker._showTimepicker(this):d=!1;d&&(a.preventDefault(),a.stopPropagation())},_doKeyUp:function(a){a=c.timepicker._getInst(a.target);c.timepicker._setTimeFromField(a);c.timepicker._updateTimepicker(a)},_attachments:function(a,b){var d=this._get(b,"appendText"),e=this._get(b,"isRTL");b.append&&b.append.remove();d&&(b.append=c('<span class="'+this._appendClass+'">'+d+"</span>"),a[e?"before":"after"](b.append));a.unbind("focus.timepicker",this._showTimepicker);a.unbind("click.timepicker",this._adjustZIndex);b.trigger&&b.trigger.remove();d=this._get(b,"showOn");if("focus"==d||"both"==d)a.bind("focus.timepicker",this._showTimepicker),a.bind("click.timepicker",this._adjustZIndex);if("button"==d||"both"==d)d=this._get(b,"button"),c(d).bind("click.timepicker",function(){c.timepicker._timepickerShowing&&c.timepicker._lastInput==a[0]?c.timepicker._hideTimepicker():b.input.is(":disabled")||c.timepicker._showTimepicker(a[0]);return!1})},_inlineTimepicker:function(a,b){var d=c(a);d.hasClass(this.markerClassName)||(d.addClass(this.markerClassName).append(b.tpDiv).bind("setData.timepicker",function(a,c,d){b.settings[c]=d}).bind("getData.timepicker",function(a,c){return this._get(b,c)}),c.data(a,"timepicker",b),this._setTimeFromField(b),this._updateTimepicker(b),b.tpDiv.show())},_adjustZIndex:function(a){a=a.target||a;c.timepicker._getInst(a).tpDiv.css("zIndex",c.timepicker._getZIndex(a)+1)},_showTimepicker:function(a){a=a.target||a;"input"!=a.nodeName.toLowerCase()&&(a=c("input",a.parentNode)[0]);if(!(c.timepicker._isDisabledTimepicker(a)||c.timepicker._lastInput==a)){c.timepicker._hideTimepicker();var b=c.timepicker._getInst(a);c.timepicker._curInst&&c.timepicker._curInst!=b&&c.timepicker._curInst.tpDiv.stop(!0,!0);var d=c.timepicker._get(b,"beforeShow");t(b.settings,d?d.apply(a,[a,b]):{});b.lastVal=null;c.timepicker._lastInput=a;c.timepicker._setTimeFromField(b);c.timepicker._inDialog&&(a.value="");c.timepicker._pos||(c.timepicker._pos=c.timepicker._findPos(a),c.timepicker._pos[1]+=a.offsetHeight);var e=!1;c(a).parents().each(function(){e|="fixed"==c(this).css("position");return!e});d={left:c.timepicker._pos[0],top:c.timepicker._pos[1]};c.timepicker._pos=null;b.tpDiv.css({position:"absolute",display:"block",top:"-1000px"});c.timepicker._updateTimepicker(b);!b.inline&&"object"==typeof c.ui.position&&(b.tpDiv.position({of:b.input,my:c.timepicker._get(b,"myPosition"),at:c.timepicker._get(b,"atPosition"),collision:"flip"}),d=b.tpDiv.offset(),c.timepicker._pos=[d.top,d.left]);b._hoursClicked=!1;b._minutesClicked=!1;d=c.timepicker._checkOffset(b,d,e);b.tpDiv.css({position:c.timepicker._inDialog&&c.blockUI?"static":e?"fixed":"absolute",display:"none",left:d.left+"px",top:d.top+"px"});if(!b.inline){var d=c.timepicker._get(b,"showAnim"),f=c.timepicker._get(b,"duration"),g=function(){c.timepicker._timepickerShowing=!0;var a=c.timepicker._getBorders(b.tpDiv);b.tpDiv.find("iframe.ui-timepicker-cover").css({left:-a[0],top:-a[1],width:b.tpDiv.outerWidth(),height:b.tpDiv.outerHeight()})};c.timepicker._adjustZIndex(a);c.effects&&c.effects[d]?b.tpDiv.show(d,c.timepicker._get(b,"showOptions"),f,g):b.tpDiv.show(d?f:null,g);(!d||!f)&&g();b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus();c.timepicker._curInst=b}}},_getZIndex:function(a){a=c(a);for(var b=0,d;a.length&&a[0]!==document;){d=a.css("position");if("absolute"===d||"relative"===d||"fixed"===d)d=parseInt(a.css("zIndex"),10),!isNaN(d)&&0!==d&&d>b&&(b=d);a=a.parent()}return b},_refreshTimepicker:function(a){(a=this._getInst(a))&&this._updateTimepicker(a)},_updateTimepicker:function(a){a.tpDiv.empty().append(this._generateHTML(a));this._rebindDialogEvents(a)},_rebindDialogEvents:function(a){var b=c.timepicker._getBorders(a.tpDiv),d=this;a.tpDiv.find("iframe.ui-timepicker-cover").css({left:-b[0],top:-b[1],width:a.tpDiv.outerWidth(),height:a.tpDiv.outerHeight()}).end().find(".ui-timepicker-minute-cell").unbind().bind("click",{fromDoubleClick:!1},c.proxy(c.timepicker.selectMinutes,this)).bind("dblclick",{fromDoubleClick:!0},c.proxy(c.timepicker.selectMinutes,this)).end().find(".ui-timepicker-hour-cell").unbind().bind("click",{fromDoubleClick:!1},c.proxy(c.timepicker.selectHours,this)).bind("dblclick",{fromDoubleClick:!0},c.proxy(c.timepicker.selectHours,this)).end().find(".ui-timepicker td a").unbind().bind("mouseout",function(){c(this).removeClass("ui-state-hover");-1!=this.className.indexOf("ui-timepicker-prev")&&c(this).removeClass("ui-timepicker-prev-hover");-1!=this.className.indexOf("ui-timepicker-next")&&c(this).removeClass("ui-timepicker-next-hover")}).bind("mouseover",function(){if(!d._isDisabledTimepicker(a.inline?a.tpDiv.parent()[0]:a.input[0]))c(this).parents(".ui-timepicker-calendar").find("a").removeClass("ui-state-hover"),c(this).addClass("ui-state-hover"),-1!=this.className.indexOf("ui-timepicker-prev")&&c(this).addClass("ui-timepicker-prev-hover"),-1!=this.className.indexOf("ui-timepicker-next")&&c(this).addClass("ui-timepicker-next-hover")}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end().find(".ui-timepicker-now").bind("click",function(a){c.timepicker.selectNow(a)}).end().find(".ui-timepicker-deselect").bind("click",function(a){c.timepicker.deselectTime(a)}).end().find(".ui-timepicker-close").bind("click",function(a){c.timepicker._hideTimepicker()}).end()},_generateHTML:function(a){var b,c,e,f,g=!0==this._get(a,"showPeriod"),k=!0==this._get(a,"showPeriodLabels"),l=!0==this._get(a,"showLeadingZero");c=!0==this._get(a,"showHours");var h=!0==this._get(a,"showMinutes"),n=this._get(a,"amPmText"),m=this._get(a,"rows"),p=0,q=0,u=f=0,t=0,x=0,r=[],v=this._get(a,"hours");b=null;var s=0;e=this._get(a,"hourText");var y=this._get(a,"showCloseButton"),w=this._get(a,"closeButtonText"),z=this._get(a,"showNowButton"),B=this._get(a,"nowButtonText"),A=this._get(a,"showDeselectButton"),C=this._get(a,"deselectButtonText"),D=y||z||A;for(b=v.starts;b<=v.ends;b++)r.push(b);b=Math.ceil(r.length/m);if(k){for(s=0;s<r.length;s++)12>r[s]?f++:u++;s=0;p=Math.floor(f/r.length*m);q=Math.floor(u/r.length*m);m!=p+q&&(f&&(!u||!p||q&&f/p>=u/q)?p++:q++);t=Math.min(p,1);x=p+1;b=0==p?Math.ceil(u/q):0==q?Math.ceil(f/p):Math.ceil(Math.max(f/p,u/q))}f='<table class="ui-timepicker-table ui-widget-content ui-corner-all"><tr>';if(c){f+='<td class="ui-timepicker-hours"><div class="ui-timepicker-title ui-widget-header ui-helper-clearfix ui-corner-all">'+e+'</div><table class="ui-timepicker">';for(c=1;c<=m;c++){f+="<tr>";c==t&&k&&(f+='<th rowspan="'+p.toString()+'" class="periods" scope="row">'+n[0]+"</th>");c==x&&k&&(f+='<th rowspan="'+q.toString()+'" class="periods" scope="row">'+n[1]+"</th>");for(e=1;e<=b;e++)k&&c<x&&12<=r[s]?f+=this._generateHTMLHourCell(a,void 0,g,l):(f+=this._generateHTMLHourCell(a,r[s],g,l),s++);f+="</tr>"}f+="</table></td>"}h&&(f=f+'<td class="ui-timepicker-minutes">'+this._generateHTMLMinutes(a),f+="</td>");f+="</tr>";D&&(g='<tr><td colspan="3"><div class="ui-timepicker-buttonpane ui-widget-content">',z&&(g+='<button type="button" class="ui-timepicker-now ui-state-default ui-corner-all"  data-timepicker-instance-id="#'+a.id.replace(/\\\\/g,"\\")+'" >'+B+"</button>"),A&&(g+='<button type="button" class="ui-timepicker-deselect ui-state-default ui-corner-all"  data-timepicker-instance-id="#'+a.id.replace(/\\\\/g,"\\")+'" >'+C+"</button>"),y&&(g+='<button type="button" class="ui-timepicker-close ui-state-default ui-corner-all"  data-timepicker-instance-id="#'+a.id.replace(/\\\\/g,"\\")+'" >'+w+"</button>"),f+=g+"</div></td></tr>");return f+="</table>"},_updateMinuteDisplay:function(a){var b=this._generateHTMLMinutes(a);a.tpDiv.find("td.ui-timepicker-minutes").html(b);this._rebindDialogEvents(a)},_generateHTMLMinutes:function(a){var b,c,e="",f=this._get(a,"rows"),g=[];c=this._get(a,"minutes");var k=null,l=0,h=!0==this._get(a,"showMinutesLeadingZero"),n=this._get(a,"onMinuteShow"),m=this._get(a,"minuteText");c.starts||(c.starts=0);c.ends||(c.ends=59);for(b=c.starts;b<=c.ends;b+=c.interval)g.push(b);k=Math.round(g.length/f+0.49);if(n&&!1==n.apply(a.input?a.input[0]:null,[a.hours,a.minutes]))for(l=0;l<g.length;l+=1)if(b=g[l],n.apply(a.input?a.input[0]:null,[a.hours,b])){a.minutes=b;break}e+='<div class="ui-timepicker-title ui-widget-header ui-helper-clearfix ui-corner-all">'+m+'</div><table class="ui-timepicker">';l=0;for(c=1;c<=f;c++){for(e+="<tr>";l<c*k;)b=g[l],n="",void 0!==b&&(n=10>b&&h?"0"+b.toString():b.toString()),e+=this._generateHTMLMinuteCell(a,b,n),l++;e+="</tr>"}return e+"</table>"},_generateHTMLHourCell:function(a,b,c,e){var f=b;12<b&&c&&(f=b-12);0==f&&c&&(f=12);10>f&&e&&(f="0"+f);c="";c=!0;e=this._get(a,"onHourShow");if(void 0==b)return'<td><span class="ui-state-default ui-state-disabled">&nbsp;</span></td>';e&&(c=e.apply(a.input?a.input[0]:null,[b]));return c=c?'<td class="ui-timepicker-hour-cell" data-timepicker-instance-id="#'+a.id.replace(/\\\\/g,"\\")+'" data-hour="'+b.toString()+'"><a class="ui-state-default '+(b==a.hours?"ui-state-active":"")+'">'+f.toString()+"</a></td>":'<td><span class="ui-state-default ui-state-disabled '+(b==a.hours?" ui-state-active ":" ")+'">'+f.toString()+"</span></td>"},_generateHTMLMinuteCell:function(a,b,c){var e="",e=!0,f=this._get(a,"onMinuteShow");f&&(e=f.apply(a.input?a.input[0]:null,[a.hours,b]));return void 0==b?'<td><span class="ui-state-default ui-state-disabled">&nbsp;</span></td>':e=e?'<td class="ui-timepicker-minute-cell" data-timepicker-instance-id="#'+a.id.replace(/\\\\/g,"\\")+'" data-minute="'+b.toString()+'" ><a class="ui-state-default '+(b==a.minutes?"ui-state-active":"")+'" >'+c+"</a></td>":'<td><span class="ui-state-default ui-state-disabled" >'+c+"</span></td>"},_destroyTimepicker:function(a){var b=c(a),d=c.data(a,"timepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();c.removeData(a,"timepicker");"input"==e?(d.append.remove(),d.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus.timepicker",this._showTimepicker).unbind("click.timepicker",this._adjustZIndex)):("div"==e||"span"==e)&&b.removeClass(this.markerClassName).empty()}},_enableTimepicker:function(a){var b=c(a),d=b.attr("id"),e=c.data(a,"timepicker");if(b.hasClass(this.markerClassName)){var f=a.nodeName.toLowerCase();if("input"==f)a.disabled=!1,a=this._get(e,"button"),c(a).removeClass("ui-state-disabled").disabled=!1,e.trigger.filter("button").each(function(){this.disabled=!1}).end();else if("div"==f||"span"==f)e=b.children("."+this._inlineClass),e.children().removeClass("ui-state-disabled"),e.find("button").each(function(){this.disabled=!1});this._disabledInputs=c.map(this._disabledInputs,function(a){return a==d?null:a})}},_disableTimepicker:function(a){var b=c(a),d=c.data(a,"timepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();if("input"==e)e=this._get(d,"button"),c(e).addClass("ui-state-disabled").disabled=!0,a.disabled=!0,d.trigger.filter("button").each(function(){this.disabled=!0}).end();else if("div"==e||"span"==e)d=b.children("."+this._inlineClass),d.children().addClass("ui-state-disabled"),d.find("button").each(function(){this.disabled=!0});this._disabledInputs=c.map(this._disabledInputs,function(b){return b==a?null:b});this._disabledInputs[this._disabledInputs.length]=b.attr("id")}},_isDisabledTimepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return!0;return!1},_checkOffset:function(a,b,d){var e=a.tpDiv.outerWidth(),f=a.tpDiv.outerHeight(),g=a.input?a.input.outerWidth():0,k=a.input?a.input.outerHeight():0,l=document.documentElement.clientWidth+c(document).scrollLeft(),h=document.documentElement.clientHeight+c(document).scrollTop();b.left-=this._get(a,"isRTL")?e-g:0;b.left-=d&&b.left==a.input.offset().left?c(document).scrollLeft():0;b.top-=d&&b.top==a.input.offset().top+k?c(document).scrollTop():0;b.left-=Math.min(b.left,b.left+e>l&&l>e?Math.abs(b.left+e-l):0);b.top-=Math.min(b.top,b.top+f>h&&h>f?Math.abs(f+k):0);return b},_findPos:function(a){for(var b=this._getInst(a),b=this._get(b,"isRTL");a&&("hidden"==a.type||1!=a.nodeType);)a=a[b?"previousSibling":"nextSibling"];a=c(a).offset();return[a.left,a.top]},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkExternalClick:function(a){c.timepicker._curInst&&(a=c(a.target),a[0].id!=c.timepicker._mainDivId&&(0==a.parents("#"+c.timepicker._mainDivId).length&&!a.hasClass(c.timepicker.markerClassName)&&!a.hasClass(c.timepicker._triggerClass)&&c.timepicker._timepickerShowing&&(!c.timepicker._inDialog||!c.blockUI))&&c.timepicker._hideTimepicker())},_hideTimepicker:function(a){var b=this._curInst;if(b&&!(a&&b!=c.data(a,"timepicker"))&&this._timepickerShowing){a=this._get(b,"showAnim");var d=this._get(b,"duration"),e=function(){c.timepicker._tidyDialog(b);this._curInst=null};if(c.effects&&c.effects[a])b.tpDiv.hide(a,c.timepicker._get(b,"showOptions"),d,e);else b.tpDiv["slideDown"==a?"slideUp":"fadeIn"==a?"fadeOut":"hide"](a?d:null,e);a||e();this._timepickerShowing=!1;this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),c.blockUI&&(c.unblockUI(),c("body").append(this.tpDiv)));this._inDialog=!1;(a=this._get(b,"onClose"))&&a.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b])}},_tidyDialog:function(a){a.tpDiv.removeClass(this._dialogClass).unbind(".ui-timepicker")},_getInst:function(a){try{return c.data(a,"timepicker")}catch(b){throw"Missing instance data for this timepicker";}},_get:function(a,b){return void 0!==a.settings[b]?a.settings[b]:this._defaults[b]},_setTimeFromField:function(a){if(a.input.val()!=a.lastVal){var b=this._get(a,"defaultTime"),b="now"==b?this._getCurrentTimeRounded(a):b;!1==a.inline&&""!=a.input.val()&&(b=a.input.val());if(b instanceof Date)a.hours=b.getHours(),a.minutes=b.getMinutes();else{var d=a.lastVal=b;""==b?(a.hours=-1,a.minutes=-1):(b=this.parseTime(a,d),a.hours=b.hours,a.minutes=b.minutes)}c.timepicker._updateTimepicker(a)}},_optionTimepicker:function(a,b,d){var e=this._getInst(a);if(2==arguments.length&&"string"==typeof b)return"defaults"==b?c.extend({},c.timepicker._defaults):e?"all"==b?c.extend({},e.settings):this._get(e,b):null;var f=b||{};"string"==typeof b&&(f={},f[b]=d);e&&(this._curInst==e&&this._hideTimepicker(),t(e.settings,f),this._updateTimepicker(e))},_setTimeTimepicker:function(a,b){var c=this._getInst(a);c&&(this._setTime(c,b),this._updateTimepicker(c),this._updateAlternate(c,b))},_setTime:function(a,b,c){var e=a.hours,f=a.minutes;b instanceof Date?(a.hours=b.getHours(),a.minutes=b.getMinutes()):(b=this.parseTime(a,b),a.hours=b.hours,a.minutes=b.minutes);(e!=a.hours||f!=a.minutes)&&!c&&a.input.trigger("change");this._updateTimepicker(a);this._updateSelectedValue(a)},_getCurrentTimeRounded:function(a){a=new Date;var b=a.getMinutes(),b=5*Math.round(b/5);a.setMinutes(b);return a},parseTime:function(a,b){var c={hours:-1,minutes:-1};if(!b)return"";var e=this._get(a,"timeSeparator"),f=this._get(a,"amPmText"),g=this._get(a,"showHours"),k=this._get(a,"showMinutes"),l=this._get(a,"optionalMinutes"),h=!0==this._get(a,"showPeriod"),e=b.indexOf(e);-1!=e?(c.hours=parseInt(b.substr(0,e),10),c.minutes=parseInt(b.substr(e+1),10)):g&&(!k||l)?c.hours=parseInt(b,10):!g&&k&&(c.minutes=parseInt(b,10));g&&(g=b.toUpperCase(),12>c.hours&&(h&&-1!=g.indexOf(f[1].toUpperCase()))&&(c.hours+=12),12==c.hours&&(h&&-1!=g.indexOf(f[0].toUpperCase()))&&(c.hours=0));return c},selectNow:function(a){a=c(a.target).attr("data-timepicker-instance-id");a=c(a);a=this._getInst(a[0]);var b=new Date;a.hours=b.getHours();a.minutes=b.getMinutes();this._updateSelectedValue(a);this._updateTimepicker(a);this._hideTimepicker()},deselectTime:function(a){a=c(a.target).attr("data-timepicker-instance-id");a=c(a);a=this._getInst(a[0]);a.hours=-1;a.minutes=-1;this._updateSelectedValue(a);this._hideTimepicker()},selectHours:function(a){var b=c(a.currentTarget),d=b.attr("data-timepicker-instance-id"),e=parseInt(b.attr("data-hour"));a=a.data.fromDoubleClick;var d=c(d),f=this._getInst(d[0]),g=!0==this._get(f,"showMinutes");if(c.timepicker._isDisabledTimepicker(d.attr("id")))return!1;b.parents(".ui-timepicker-hours:first").find("a").removeClass("ui-state-active");b.children("a").addClass("ui-state-active");f.hours=e;this._get(f,"onMinuteShow")&&this._updateMinuteDisplay(f);this._updateSelectedValue(f);f._hoursClicked=!0;(f._minutesClicked||a||!1==g)&&c.timepicker._hideTimepicker();return!1},selectMinutes:function(a){var b=c(a.currentTarget),d=b.attr("data-timepicker-instance-id"),e=parseInt(b.attr("data-minute"));a=a.data.fromDoubleClick;var d=c(d),f=this._getInst(d[0]),g=!0==this._get(f,"showHours");if(c.timepicker._isDisabledTimepicker(d.attr("id")))return!1;b.parents(".ui-timepicker-minutes:first").find("a").removeClass("ui-state-active");b.children("a").addClass("ui-state-active");f.minutes=e;this._updateSelectedValue(f);f._minutesClicked=!0;(f._hoursClicked||a||!1==g)&&c.timepicker._hideTimepicker();return!1},_updateSelectedValue:function(a){var b=this._getParsedTime(a);a.input&&(a.input.val(b),a.input.trigger("change"));var c=this._get(a,"onSelect");c&&c.apply(a.input?a.input[0]:null,[b,a]);this._updateAlternate(a,b);return b},_getParsedTime:function(a){if(-1==a.hours&&-1==a.minutes)return"";if(a.hours<a.hours.starts||a.hours>a.hours.ends)a.hours=0;if(a.minutes<a.minutes.starts||a.minutes>a.minutes.ends)a.minutes=0;var b="",c=!0==this._get(a,"showPeriod"),e=!0==this._get(a,"showLeadingZero"),f=!0==this._get(a,"showHours"),g=!0==this._get(a,"showMinutes"),k=!0==this._get(a,"optionalMinutes"),l=this._get(a,"amPmText"),h=a.hours?a.hours:0,n=a.minutes?a.minutes:0,m=h?h:0,h="";-1==m&&(m=0);-1==n&&(n=0);c&&(0==a.hours&&(m=12),12>a.hours?b=l[0]:(b=l[1],12<m&&(m-=12)));c=m.toString();e&&10>m&&(c="0"+c);e=n.toString();10>n&&(e="0"+e);f&&(h+=c);if(f&&g&&(!k||0!=e))h+=this._get(a,"timeSeparator");if(g&&(!k||0!=e))h+=e;f&&0<b.length&&(h+=this._get(a,"periodSeparator")+b);return h},_updateAlternate:function(a,b){var d=this._get(a,"altField");d&&c(d).each(function(a,d){c(d).val(b)})},_getTimeAsDateTimepicker:function(a){a=this._getInst(a);if(-1==a.hours&&-1==a.minutes)return"";if(a.hours<a.hours.starts||a.hours>a.hours.ends)a.hours=0;if(a.minutes<a.minutes.starts||a.minutes>a.minutes.ends)a.minutes=0;return new Date(0,0,0,a.hours,a.minutes,0)},_getTimeTimepicker:function(a){a=this._getInst(a);return this._getParsedTime(a)},_getHourTimepicker:function(a){a=this._getInst(a);return void 0==a?-1:a.hours},_getMinuteTimepicker:function(a){a=this._getInst(a);return void 0==a?-1:a.minutes}});c.fn.timepicker=function(a){c.timepicker.initialized||(c(document).mousedown(c.timepicker._checkExternalClick).find("body").append(c.timepicker.tpDiv),c.timepicker.initialized=!0);var b=Array.prototype.slice.call(arguments,1);return"string"==typeof a&&("getTime"==a||"getTimeAsDate"==a||"getHour"==a||"getMinute"==a)||"option"==a&&2==arguments.length&&"string"==typeof arguments[1]?c.timepicker["_"+a+"Timepicker"].apply(c.timepicker,[this[0]].concat(b)):this.each(function(){"string"==typeof a?c.timepicker["_"+a+"Timepicker"].apply(c.timepicker,[this].concat(b)):c.timepicker._attachTimepicker(this,a)})};c.timepicker=new v;c.timepicker.initialized=!1;c.timepicker.uuid=(new Date).getTime();c.timepicker.version="0.3.2";window["TP_jQuery_"+w]=c})(jQuery);